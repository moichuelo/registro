<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>index.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-verifyAdmin.html">verifyAdmin</a></li></ul><h3>Global</h3><ul><li><a href="global.html#city">city</a></li><li><a href="global.html#saludar">saludar</a></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">index.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>//9 1 Iniciar las librerías
const express = require("express");
const app = express();
require("dotenv").config({ path: "./env/.env" });
// const cookieSession = require("cookie-session");
const jwt = require("jsonwebtoken");
const cookieParser = require("cookie-parser");
const http = require("http"); //crear servidor
const socketIO = require("socket.io");
const server = http.createServer(app);
// @ts-ignore
const io = socketIO(server);
const db = require("./database/db");
const setupSocket = require("./src/sockets/socketHandler");
const securityMiddleware = require("./src/middlewares/security");
const i18n = require('i18n');
const path = require('path');
const setGlobals = require('./src/middlewares/setGlobals');
const { swaggerUi, swaggerSpec } = require('./swagger');
/**
 * Una variable que almacena la ciudad
 * @type {string}
 */
const city = process.env.CITY;

// Configurar lógica internacionalización
i18n.configure({
    locales: ['en', 'es'], // Idiomas disponibles
    directory: path.join(__dirname, 'locales'), // Carpeta donde se guardan los archivos de traducción
    defaultLocale: 'es',
    cookie: 'lang', // Puedes leer el idioma desde una cookie
    queryParameter: 'lang', // O desde la URL ?lang=en
    autoReload: true,
    syncFiles: true
});


// const expressLayouts = require("express-ejs-layouts");

//9 7 Definir la sesión
app.use(cookieParser()); // Necesario para leer cookies
// app.use(cookieSession(sessionConfig));

//9 3 Definir los middlewares
app.use(express.urlencoded({ extended: true })); //nos permite recibir datos de un formulario
app.use(express.json()); //nos permite recibir datos de una API
app.use("/resources", express.static(__dirname + "/public"));
app.use('/api-docs', swaggerUi.serve, swaggerUi.setup(swaggerSpec));
app.use(securityMiddleware);
app.use(i18n.init);
app.use(setGlobals);
app.use("/", require("./src/router"));


//9 6 Definir el motor de vistas
app.set("view engine", "ejs");
// app.use(expressLayouts);
// app.set("views", __dirname + "/views");

//9 8 Configurar lógica WebSocket
setupSocket(io);



//9 2 Crear el servidor
server.listen(3000, () => {
    console.log("Servidor corriendo en http://localhost:3000");
    console.log('Swagger disponible en http://localhost:3000/api-docs');
});

/** 
* Esta función saluda a un usuario tantas veces como se haya 
especificado 
* @function
* @name saludar
* @param {Number} num Veces que saludará 
* @param {String} nombre El nombre del usuario 
* @param {String} [apellido] El apellido del usuario 
* @param {String|number} [edad] la edad del usuario 
* @returns {Number} Las veces que ha saludado 
*/
function saludar(num, nombre, apellido, edad) {
    for (var i = 0; i &lt; num; i++) {
        console.log("hola " + nombre + " " + apellido + " ");
    }
    return num;
}


saludar(3, "pepe", "perez", 30);</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.4</a> on Wed Jul 30 2025 19:19:12 GMT+0200 (hora de verano de Europa central) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
